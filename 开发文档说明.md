# 项目开发文档说明

**作者：shujin**  
**联系方式：adilei.shujin@gmail.com**

## 1. 项目简介

本项目为一套基于 Vue3 + Pinia + Element Plus 的教务/教培管理系统，支持**模拟数据模式**与**API（后端）模式**自由切换，适合前后端分离开发、演示、联调和上线。

### 1.1 最新更新 (2025-07-27)
- ✅ **排课功能完全重构**：从 FullCalendar 组件改为自定义卡片式设计
- ✅ **首页美化升级**：添加动态日期时间、表情符号、渐变背景、响应式设计
- ✅ **财务图表简化**：移除冗余图表，保留核心统计功能
- ✅ **数据同步优化**：修复所有模块的数据实时更新问题
- ✅ **系统公告功能**：完善删除逻辑，实现与消息功能一致的用户体验

---

## 2. 数据模式说明

### 2.1 模拟数据模式（Mock）
- **数据来源**：所有功能模块（教师、学生、课程、班级、排课、费用、消息、公告等）均有一份全局 mock 数据，统一维护在 `src/utils/api.js`（如 teachersDB、studentsDB、coursesDB、financeDB 等）。
- **操作行为**：
  - 增删改操作会**立即修改 mock 数据源**（如 teachersDB），页面和图表会**立即刷新显示最新数据**。
  - 所有操作（添加、删除、修改）均有明确的用户提示（如"添加成功""删除成功"）。
- **联动说明**：统计卡片、图表等数据联动会在操作后立即同步刷新。

### 2.2 API模式（真实后端）
- **数据来源**：所有功能模块的数据和操作均通过后端 API 获取和提交。
- **操作行为**：
  - 增删改操作后，页面和图表会**立即刷新**，与后端数据保持同步。
  - 所有操作均有明确的用户提示。
- **联动说明**：所有统计和图表会在操作后自动联动刷新。

### 2.3 数据源切换
- 通过页面右上角"模拟数据/ API数据"按钮切换，**全局响应**，所有页面和功能的数据源同步切换，不能混用。

---

## 3. 主要功能模块

### 3.1 教师管理
- **功能**：增删改查教师信息，支持模拟和API两种数据源
- **特性**：实时数据更新，本地数据优先级逻辑

### 3.2 学生管理
- **功能**：增删改查学生信息，支持模拟和API两种数据源
- **特性**：实时数据更新，本地数据优先级逻辑

### 3.3 课程管理
- **功能**：增删改查课程信息，支持模拟和API两种数据源
- **特性**：实时数据更新，本地数据优先级逻辑

### 3.4 班级管理
- **功能**：增删改查班级信息，支持模拟和API两种数据源
- **特性**：实时数据更新，统计信息实时计算

### 3.5 排课管理 ⭐ 全新设计
- **功能**：月视图、周视图、日视图的卡片式排课系统
- **特性**：
  - 自定义卡片式设计，替代 FullCalendar 组件
  - 支持批量排课功能
  - 课程类型颜色区分（Python、Java、AI、Web）
  - 实时数据更新和显示
  - 响应式设计，适配不同屏幕尺寸

### 3.6 费用管理
- **功能**：财务记录、统计卡片，支持模拟和API两种数据源
- **特性**：简化图表设计，保留核心统计功能

### 3.7 消息/公告中心
- **功能**：系统消息、公告的增删改查，支持模拟和API两种数据源
- **特性**：完善的删除逻辑，与消息功能一致的用户体验

### 3.8 首页仪表板 ⭐ 全新设计
- **功能**：动态欢迎信息、实时统计数据、教育名言展示
- **特性**：
  - 动态日期时间显示
  - 表情符号和渐变背景
  - 响应式设计
  - 单名言卡片设计

---

## 4. 交互体验

### 4.1 统一的操作反馈
- **所有操作均有用户提示**（如添加、删除、修改成功/失败）
- **模拟数据模式下**，操作后页面和图表立即刷新
- **API模式下**，操作后页面和图表立即刷新

### 4.2 数据实时同步
- **本地数据优先级逻辑**：在模拟模式下，优先使用本地已加载的数据
- **实时统计更新**：所有统计数据在数据变化时立即更新
- **图表实时刷新**：图表数据随数据变化实时更新

---

## 5. 技术架构

### 5.1 核心技术栈
- **Vue 3**：使用 Composition API
- **Pinia**：状态管理
- **Element Plus**：UI组件库
- **Vite**：构建工具

### 5.2 数据管理
- **Mock数据**：统一维护在 `src/utils/api.js`
- **Store模式**：每个模块对应一个 Pinia store
- **数据源切换**：通过 `dataSourceStore` 全局控制

### 5.3 组件设计
- **响应式设计**：适配不同屏幕尺寸
- **卡片式布局**：现代化的UI设计
- **渐变背景**：美观的视觉效果

---

## 6. 开发/联调建议

### 6.1 开发阶段
- **建议使用模拟数据模式**，便于前端独立开发和演示
- **Mock数据维护**：只需维护 `api.js` 里的全局 mock 数据
- **本地数据优先级**：确保数据一致性

### 6.2 联调/上线阶段
- **切换到API模式**，确保所有功能与后端接口联通
- **数据实时同步**，确保数据和页面实时同步
- **错误处理**：完善的错误提示和处理机制

---

## 7. 代码结构

### 7.1 目录结构
```
src/
├── stores/          # Pinia状态管理
├── views/           # 页面组件
├── utils/           # 工具函数
│   ├── api.js       # Mock数据和API封装
│   └── dataManager.js # 数据管理工具
└── components/      # 公共组件
```

### 7.2 数据流
1. **数据获取**：Store → dataManager → api.js
2. **数据更新**：组件 → Store → dataManager → api.js
3. **UI更新**：Store → 组件 → 响应式更新

---

## 8. 最新修复记录

### 8.1 排课功能重构 (2025-07-27)
- **问题**：FullCalendar组件体验不佳
- **解决方案**：完全重构为自定义卡片式设计
- **改进**：
  - 月视图、周视图、日视图的卡片布局
  - 课程类型颜色区分
  - 响应式设计
  - 实时数据更新

### 8.2 首页美化升级 (2025-07-27)
- **问题**：首页设计单调
- **解决方案**：添加动态元素和现代化设计
- **改进**：
  - 动态日期时间显示
  - 表情符号和渐变背景
  - 教育名言展示
  - 响应式设计

### 8.3 数据同步问题修复 (2025-07-27)
- **问题**：模拟模式下数据不同步
- **解决方案**：实现本地数据优先级逻辑
- **改进**：
  - 所有模块的数据实时更新
  - 统计信息实时计算
  - 图表数据实时刷新

### 8.4 系统公告功能完善 (2025-07-27)
- **问题**：删除逻辑不一致
- **解决方案**：统一删除逻辑
- **改进**：
  - 与消息功能一致的用户体验
  - 完善的错误处理
  - 实时数据更新

---

## 9. 后续开发建议

### 9.1 功能扩展
- **新模块开发**：直接在 `api.js` 维护 mock 数据
- **数据一致性**：确保 mock 数据与 API 数据结构一致
- **用户体验**：保持操作反馈的一致性

### 9.2 性能优化
- **数据缓存**：合理使用本地数据优先级逻辑
- **组件优化**：使用 Vue 3 的响应式特性
- **构建优化**：利用 Vite 的快速构建能力

### 9.3 维护建议
- **Mock数据维护**：定期更新 `api.js` 中的 mock 数据
- **错误处理**：完善各模块的错误处理机制
- **文档更新**：及时更新开发文档

---

如需更详细的接口文档、mock数据结构说明、或具体模块的开发说明，请随时联系开发者！ 